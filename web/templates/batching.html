<!DOCTYPE html>
<!-- ./web/templates/batching.html -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AsciiDoc XML Converter - Batching</title>
    <link rel="stylesheet" href="/static/app.css">
    <script src="/static/watcher-queue.js"></script>
</head>
<body class="batch-page">
    <div id="navbar-placeholder">
        <nav class="navbar">
            <div class="navbar-content">
                <h1 class="navbar-title">AsciiDoc XML Converter</h1>
                <div class="navbar-menu">
                    <a href="/" class="navbar-link">Home</a>
                    <a href="/docs" class="navbar-link">Docs</a>
                    <a href="/batch" class="navbar-link active">Batching</a>
                    <a href="/browse" class="navbar-link">Browse</a>
                </div>
                <span class="status" id="status"></span>
            </div>
        </nav>
    </div>

    <div class="batch-container">
        <div class="card">
            <h2>Upload Zip Batch</h2>
            <p>Upload a zip file containing multiple AsciiDoc documents to be processed.</p>
            <div class="form-group">
                <label for="zipFile">Select Zip File</label>
                <input type="file" id="zipFile" accept=".zip">
            </div>
            <button id="btn-upload-zip" class="btn">Upload & Process</button>
            <div id="zip-status" class="status"></div>
        </div>

        <div class="card">
            <h2>Server Folder Batch</h2>
            <p>Specify a folder path on the server to process.</p>
            <div class="form-group">
                <label for="folderPath">Folder Path</label>
                <input type="text" id="folderPath" placeholder="/path/to/docs">
            </div>
            <div class="form-group form-group-inline">
                <label for="folder-output-type">Output:</label>
                <select id="folder-output-type">
                    <option value="xml">XML</option>
                    <option value="html" selected>HTML</option>
                    <option value="html5">HTML5</option>
                    <option value="xhtml">XHTML</option>
                    <option value="xhtml5">XHTML5</option>
                    <option value="md2adoc">MD2ADoc</option>
                </select>
                <button id="btn-process-folder" class="btn">Process Folder</button>
            </div>
            <div id="folder-status" class="status"></div>
            <div id="folder-actions" class="folder-actions">
                <div class="folder-actions-row">
                    <label id="output-files-only-label" class="output-files-only-label">
                        <input type="checkbox" id="output-files-only">
                        Outputted files only
                    </label>
                    <button id="btn-download-zip" class="btn btn-success hidden">Download Results</button>
                    <button id="btn-cleanup" class="btn btn-danger hidden">Clean Up Server</button>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>Watch Folder Configuration</h2>
            <p>Configure the daemon to watch a specific folder.</p>
            <div class="form-group">
                <label for="watchPath">Watch Path</label>
                <input type="text" id="watchPath" placeholder="/path/to/watch">
            </div>
            <button id="btn-set-watch" class="btn">Update Configuration</button>
            <div id="watch-status" class="status"></div>
        </div>
        
        <div class="card">
            <h2>Watcher Control</h2>
            <p>Control the background watcher daemon.</p>
            <div class="controls">
                <button id="btn-start-watcher" class="btn btn-success">Start Watcher</button>
                <button id="btn-stop-watcher" class="btn btn-danger">Stop Watcher</button>
            </div>
            <p>Daemon Status: <span id="daemon-status">Unknown</span></p>
            
            <div id="watcher-queue-container" class="watcher-queue-container">
                <h3>Processing Queue</h3>
                <div id="watcher-queue" class="watcher-queue">
                    <p class="watcher-queue-empty">No files in queue</p>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/shared.js"></script>
    <script src="/static/batching.js"></script>
    <div id="footer-placeholder"></div>
</body>
</html>
